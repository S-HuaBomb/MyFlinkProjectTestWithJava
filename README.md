# MyFlinkProjectTestWithJava
Flink的一个简单应用——计算实时热门商品
### 通过本文你将学到：
   1. 如何基于 EventTime 处理，如何指定 Watermark
   2. 如何使用 Flink 灵活的 Window API
   3. 何时需要用到 State，以及如何使用
   4. 如何使用 ProcessFunction 实现 TopN 功能
   
#### 实战案例介绍
本案例将实现一个“实时热门商品”的需求，我们可以将“实时热门商品”翻译成程序员更好理解的需求：每隔5分钟输出最近一小时内点击量最多的前 N 个商品。将这个需求进行分解我们大概要做这么几件事情：
   * 抽取出业务时间戳，告诉 Flink 框架基于业务时间做窗口
   * 过滤出点击行为数据
   * 按一小时的窗口大小，每5分钟统计一次，做滑动窗口聚合（Sliding Window）
   * 按每个窗口聚合，输出每个窗口中点击量前N名的商品
### 数据准备
这里我们准备了一份淘宝用户行为数据集（来自[阿里云天池公开数据集](https://tianchi.aliyun.com/dataset/)，特别感谢）。本数据集包含了淘宝上某一天随机一百万用户的所有行为（包括点击、购买、加购、收藏）。数据集的组织形式和MovieLens-20M类似，即数据集的每一行表示一条用户行为，由用户ID、商品ID、商品类目ID、行为类型和时间戳组成，并以逗号分隔。关于数据集中每一列的详细描述如下：
列名称|说明
:--|:--
用户ID|整数类型，加密后的用户ID
商品ID|整数类型，加密后的商品ID
商品类目ID|整数类型，加密后的商品所属类目ID
行为类型|字符串，枚举类型，包括(‘pv’, ‘buy’, ‘cart’, ‘fav’)
时间戳|行为发生的时间戳，单位秒
